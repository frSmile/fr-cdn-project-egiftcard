function setUpApplePay(){if(!isEmpty(vmViewIndex.apiKey())){$(".apple-pay-button").remove();isLoading(!0);let r=new usaepay.Client(vmViewIndex.apiKey()),i=[];obj={};obj.label="Subtotal";obj.amount=vmViewIndex.cart.subTotal();obj.type="final";i.push(obj);obj={};obj.label="Discount";obj.amount="-"+vmViewIndex.cart.discount();obj.type="final";i.push(obj);var n=vmViewIndex.cart.summaryTotal().toFixed(2);let u={targetDiv:"applePayContainer",displayName:vmViewIndex.globalConfig.shopName(),paymentRequest:{requiredBillingContactFields:["name","postalAddress"],lineItems:i,total:{label:"Total",amount:n,type:"final"},countryCode:"US",currencyCode:"USD"}},t=r.createApplePayEntry(u);t.checkCompatibility().then(()=>{t.addButton();var n=$("#applePayContainer .apple-pay-button");n.css("width","140px");n.css("height","35px");setTimeout(function(){isLoading(!1)},750)}).catch(()=>{isLoading(!1),document.getElementById("applePayContainer").style.display="none"});t.on("applePaySuccess",function(){var u;vmViewIndex.cart.isPayApple(!0);var i=$(getIdTag(cfrmConfirmPayment)),f=i.attr("id"),e=i.parent(),n=new ObjValidateForm(f,e);if(n.verifyData(),n.error.length>0)return n.showAlert&&(u=convertArrToString(n.error),swal(cSwal_Alert_Error,replaceNewLineToBr(u),cSwal_Icon_Error)),!0;if(vmViewIndex.cart.invalidAddress().length>0)return suggestionAddress(vmViewIndex.cart.invalidAddress(),cfrmConfirmPayment_SuggestionAddress),!0;r.getPaymentKey(t).then(n=>{paymentKeyHandler(n)}).catch(n=>{console.error("CATCH: ",n)})});t.on("applePayError",function(){isLoading(!1)})}}function paymentKeyHandler(n){isLoading(!0);vmViewIndex.cart.applePayToken(n);ConfirmPayment(cfrmConfirmPayment,null)}
//# sourceMappingURL=maps/project-bundle-apple-usaepay.min.js.map
